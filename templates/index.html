<!DOCTYPE html>
<html>
  <head>
    <title>Group Bill Splitter</title>
    <link rel="stylesheet" href="{{ url_for('static', filename = 'main.css') }}" />
    <style>
      #contributorInputs input {
        height: 30px;
      }
    </style>
  </head>
  <body>
    <h1>Group Bill Splitter</h1>
    <div class="container">
      {#
        <label for="totalAmount">Total Amount:</label>
      <input type="number" id="total_amount" placeholder="Enter total amount" />

      <label for="numberOfPeople">Number of People:</label>
      
      <input type="number" id="num_people" placeholder="Enter number of people" />
      #}
      <div id="contributors">
        <label>Contributors:</label>

        <div id="contributorInputs">
          <div>
            <input id="person_1" name="person_1" type="text" placeholder="Name" />
            <input id="expense_person_1" name="expense_person_1" type="number" placeholder="Amount" />
          </div>
          <div>
            <input id="person_2" name="person_2" type="text" placeholder="Name" />
            <input id="expense_person_2" name="expense_person_2" type="number" placeholder="Amount" />
          </div>
          <div>
            <input id="person_3" name="person_3" type="text" placeholder="Name" />
            <input id="expense_person_3" name="expense_person_3" type="number" placeholder="Amount" />
          </div>
          
        </div>
        <button type="submit">Split Bill</button>
      </div>
      {#
      <button onclick="addContributor()">Add Contributor</button>
    </div>

    <script>
      function addContributor() {
        var contributorInputs = document.getElementById('contributorInputs')
        var newContributorInput = document.createElement('div')
        newContributorInput.innerHTML = '<input type="text" name="name[]" placeholder="Name"> <input type="number" name="amount[]" placeholder="Amount">'
        contributorInputs.appendChild(newContributorInput)
      }
    </script>
    
      
      {% comment %} function splitBill() {
        var totalAmount = parseFloat(document.getElementById('totalAmount').value)
        var numberOfPeople = parseInt(document.getElementById('numberOfPeople').value)
        var contributorInputs = document.querySelectorAll('#contributorInputs input')
      
        if (isNaN(totalAmount) || isNaN(numberOfPeople) || totalAmount <= 0 || numberOfPeople <= 0 || contributorInputs.length === 0) {
          document.getElementById('results').innerHTML = 'Invalid input!'
          return
        }
      
        var totalContributors = numberOfPeople + contributorInputs.length
        var remainingAmount = totalAmount
      
        for (var i = 0; i < contributorInputs.length; i += 2) {
          var contributorName = contributorInputs[i].value.trim()
          var contributorAmount = parseFloat(contributorInputs[i + 1].value)
      
          if (contributorName !== '' && !isNaN(contributorAmount) && contributorAmount >= 0) {
            remainingAmount -= contributorAmount
          }
        }
      
        var eachPersonAmount = remainingAmount / totalContributors
      
        document.getElementById('results').innerHTML = 'Each person should pay: $' + eachPersonAmount.toFixed(2)
      } {% endcomment %}
      #}
  </body>
</html>
